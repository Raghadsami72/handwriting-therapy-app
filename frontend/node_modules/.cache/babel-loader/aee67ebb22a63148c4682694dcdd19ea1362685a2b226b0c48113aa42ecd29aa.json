{"ast":null,"code":"// agents/cnnAgent.js\nimport * as tf from '@tensorflow/tfjs';\nlet model = null;\nlet currentLanguage = null;\nexport async function loadModel(lang = \"en\") {\n  if (model && currentLanguage === lang) return model;\n  const path = lang === \"ar\" ? \"/models/model_tfjs_hala/model_tfjs/model.json\" : \"/models/ENGLISH/model.json\";\n  try {\n    model = await tf.loadLayersModel(path);\n    currentLanguage = lang;\n    console.log(`‚úÖ ${lang.toUpperCase()} model loaded.`);\n  } catch (error) {\n    console.error(`‚ùå Failed to load ${lang} model:`, error);\n    throw error;\n  }\n  return model;\n}\nexport async function predictDigit(dataURL, lang = \"en\", profile = null, archiveArray = null, patientName = \"Anonymous\") {\n  await loadModel(lang);\n  const {\n    tensor,\n    debugCanvas\n  } = await preprocessDrawing(dataURL, profile, true);\n  const prediction = model.predict(tensor);\n  const predictionArray = await prediction.array();\n  const predictedDigit = predictionArray[0].indexOf(Math.max(...predictionArray[0]));\n  const confidence = Math.max(...predictionArray[0]);\n  if (confidence < 0.6 && profile !== \"standard\") {\n    console.warn(\"‚ö†Ô∏è Low confidence. Consider fallback to less aggressive preprocessing.\");\n  }\n  if (archiveArray && debugCanvas) {\n    const blob = await new Promise(res => debugCanvas.toBlob(res, \"image/png\"));\n    const timestamp = Date.now();\n    console.log(\"üß™ Preprocessed image (debug view):\", debugCanvas.toDataURL(\"image/png\"));\n    archiveArray.push({\n      name: `digit_${predictedDigit}_${timestamp}.png`,\n      blob\n    });\n    const text = `Prediction: ${predictedDigit}\\nTimestamp: ${timestamp}\\nPatient: ${patientName}`;\n    const metaBlob = new Blob([text], {\n      type: \"text/plain\"\n    });\n    archiveArray.push({\n      name: `digit_${predictedDigit}_${timestamp}.txt`,\n      blob: metaBlob\n    });\n  }\n  return predictedDigit;\n}\nexport async function preprocessDrawing(dataURL, profile = null, includeCanvas = false) {\n  const image = new Image();\n  image.src = dataURL;\n  await new Promise(res => image.onload = res);\n  const canvas = document.createElement(\"canvas\");\n  canvas.width = image.width;\n  canvas.height = image.height;\n  const ctx = canvas.getContext(\"2d\");\n  ctx.drawImage(image, 0, 0);\n  return await preprocessCanvas(canvas, profile, includeCanvas);\n}\nfunction cropToBoundingBox(canvas) {\n  const ctx = canvas.getContext(\"2d\");\n  const {\n    width,\n    height\n  } = canvas;\n  const imageData = ctx.getImageData(0, 0, width, height);\n  const data = imageData.data;\n  let top = height,\n    bottom = 0,\n    left = width,\n    right = 0;\n  for (let y = 0; y < height; y++) {\n    for (let x = 0; x < width; x++) {\n      const idx = (y * width + x) * 4;\n      const r = data[idx],\n        g = data[idx + 1],\n        b = data[idx + 2];\n      const brightness = (r + g + b) / 3;\n      if (brightness < 240) {\n        if (x < left) left = x;\n        if (x > right) right = x;\n        if (y < top) top = y;\n        if (y > bottom) bottom = y;\n      }\n    }\n  }\n  const cropWidth = right - left + 1;\n  const cropHeight = bottom - top + 1;\n  const croppedCanvas = document.createElement(\"canvas\");\n  croppedCanvas.width = cropWidth;\n  croppedCanvas.height = cropHeight;\n  const croppedCtx = croppedCanvas.getContext(\"2d\");\n  croppedCtx.drawImage(canvas, left, top, cropWidth, cropHeight, 0, 0, cropWidth, cropHeight);\n  return deskewCanvas(croppedCanvas);\n}\nfunction deskewCanvas(canvas) {\n  const ctx = canvas.getContext(\"2d\");\n  const imageData = ctx.getImageData(0, 0, canvas.width, canvas.height);\n  const data = imageData.data;\n  let sumX = 0,\n    sumY = 0,\n    sumXY = 0,\n    sumYY = 0,\n    count = 0;\n  for (let y = 0; y < canvas.height; y++) {\n    for (let x = 0; x < canvas.width; x++) {\n      const i = (y * canvas.width + x) * 4;\n      const brightness = (data[i] + data[i + 1] + data[i + 2]) / 3;\n      const intensity = 1 - brightness / 255;\n      sumX += x * intensity;\n      sumY += y * intensity;\n      sumXY += x * y * intensity;\n      sumYY += y * y * intensity;\n      count += intensity;\n    }\n  }\n  if (count === 0) return canvas; // blank\n  const meanX = sumX / count;\n  const meanY = sumY / count;\n  const covXY = sumXY / count - meanX * meanY;\n  const varY = sumYY / count - meanY * meanY;\n  const skew = covXY / varY;\n  const deskewed = document.createElement(\"canvas\");\n  deskewed.width = canvas.width;\n  deskewed.height = canvas.height;\n  const dctx = deskewed.getContext(\"2d\");\n  dctx.setTransform(1, 0, -skew, 1, skew * canvas.height / 2, 0);\n  dctx.drawImage(canvas, 0, 0);\n  return deskewed;\n}\nexport async function preprocessCanvas(canvas, profile = null, includeCanvas = false) {\n  const cropped = cropToBoundingBox(canvas);\n\n  // Resize to 20x20 with aspect ratio preserved\n  const tempCanvas = document.createElement(\"canvas\");\n  tempCanvas.width = 20;\n  tempCanvas.height = 20;\n  const cropRatio = cropped.width / cropped.height;\n  let targetWidth = 20,\n    targetHeight = 20;\n  if (cropRatio > 1) {\n    targetHeight = Math.round(20 / cropRatio);\n  } else {\n    targetWidth = Math.round(20 * cropRatio);\n  }\n  const tempCtx = tempCanvas.getContext(\"2d\");\n  tempCtx.clearRect(0, 0, 20, 20);\n  tempCtx.drawImage(cropped, (20 - targetWidth) / 2, (20 - targetHeight) / 2, targetWidth, targetHeight);\n\n  // Pad to 28x28\n  const resized = document.createElement(\"canvas\");\n  resized.width = 28;\n  resized.height = 28;\n  const resizedCtx = resized.getContext(\"2d\");\n  resizedCtx.fillStyle = \"white\";\n  resizedCtx.fillRect(0, 0, 28, 28);\n  resizedCtx.drawImage(tempCanvas, 4, 4);\n\n  // Convert to grayscale tensor\n  const imgData = resizedCtx.getImageData(0, 0, 28, 28);\n  const data = imgData.data;\n  const gray = [];\n  for (let i = 0; i < data.length; i += 4) {\n    const avg = (data[i] + data[i + 1] + data[i + 2]) / 3;\n    gray.push(1.0 - avg / 255);\n  }\n  let tensor = tf.tensor2d(gray, [28, 28]);\n  const pixelSum = tensor.sum().dataSync()[0];\n  const binary = tensor.greater(tf.scalar(0.15)).toFloat();\n  const activePixels = binary.sum().dataSync()[0];\n  const isVerySmall = activePixels < 60 || pixelSum < 25;\n  if (!profile) {\n    profile = detectProfile(pixelSum, activePixels);\n    console.log(\"üß† Auto-selected profile:\", profile);\n  }\n  tensor = centerImage(tensor); // center using center of mass\n\n  if (profile === \"standard\") {\n    console.log(\"üéØ Standard profile: Keeping raw grayscale\");\n  } else {\n    const smoothLevel = activePixels < 80 ? \"strong\" : \"light\";\n    tensor = gaussianSmooth(tensor, smoothLevel);\n    if (!isVerySmall && tensor.sum().dataSync()[0] < 50) {\n      tensor = dilate(tensor);\n    }\n    tensor = binarize(tensor, 0.25);\n  }\n  const input = tensor.reshape([1, 28, 28, 1]);\n  let debugCanvas = null;\n  if (includeCanvas) {\n    debugCanvas = document.createElement(\"canvas\");\n    debugCanvas.width = 28;\n    debugCanvas.height = 28;\n    await tf.browser.toPixels(tensor, debugCanvas);\n  }\n  return {\n    tensor: input,\n    debugCanvas\n  };\n}\nfunction centerImage(tensor) {\n  const sum = tensor.sum().arraySync();\n  if (sum === 0) return tensor;\n  const arr = tensor.arraySync();\n  let cx = 0,\n    cy = 0;\n  for (let y = 0; y < 28; y++) {\n    for (let x = 0; x < 28; x++) {\n      const val = arr[y][x];\n      cx += x * val;\n      cy += y * val;\n    }\n  }\n  cx /= sum;\n  cy /= sum;\n  const shiftX = Math.round(14 - cx);\n  const shiftY = Math.round(14 - cy);\n  const padded = tf.pad(tensor, [[1, 1], [1, 1]], 0);\n  const begin = [1 - shiftY, 1 - shiftX];\n  const size = [28, 28];\n  const safeBegin = begin.map(v => Math.max(0, Math.min(2, v)));\n  return tf.slice(padded, safeBegin, size);\n}\nfunction gaussianSmooth(tensor, level = \"strong\") {\n  let kernelArray;\n  if (level === \"light\") {\n    kernelArray = [[0, 1, 0], [1, 4, 1], [0, 1, 0]];\n  } else {\n    kernelArray = [[1, 2, 1], [2, 4, 2], [1, 2, 1]];\n  }\n  const kernel = tf.tensor4d(kernelArray.map(row => row.map(val => [[val]])), [3, 3, 1, 1]).div(level === \"light\" ? 8 : 16);\n  return tf.conv2d(tensor.reshape([1, 28, 28, 1]), kernel, 1, 'same').reshape([28, 28]);\n}\nfunction dilate(tensor) {\n  return tf.maxPool(tensor.reshape([1, 28, 28, 1]), [3, 3], [1, 1], 'same').reshape([28, 28]);\n}\nfunction binarize(tensor, threshold = 0.25) {\n  return tensor.greater(tf.scalar(threshold)).toFloat();\n}\nfunction detectProfile(pixelSum, activePixels) {\n  const isFaint = pixelSum < 40;\n  const isSmall = activePixels < 120;\n  const isThin = activePixels < 80 && pixelSum / activePixels < 0.5;\n  if (isFaint || isSmall || isThin) return \"parkinson-enhanced\";\n  return \"standard\";\n}","map":{"version":3,"names":["tf","model","currentLanguage","loadModel","lang","path","loadLayersModel","console","log","toUpperCase","error","predictDigit","dataURL","profile","archiveArray","patientName","tensor","debugCanvas","preprocessDrawing","prediction","predict","predictionArray","array","predictedDigit","indexOf","Math","max","confidence","warn","blob","Promise","res","toBlob","timestamp","Date","now","toDataURL","push","name","text","metaBlob","Blob","type","includeCanvas","image","Image","src","onload","canvas","document","createElement","width","height","ctx","getContext","drawImage","preprocessCanvas","cropToBoundingBox","imageData","getImageData","data","top","bottom","left","right","y","x","idx","r","g","b","brightness","cropWidth","cropHeight","croppedCanvas","croppedCtx","deskewCanvas","sumX","sumY","sumXY","sumYY","count","i","intensity","meanX","meanY","covXY","varY","skew","deskewed","dctx","setTransform","cropped","tempCanvas","cropRatio","targetWidth","targetHeight","round","tempCtx","clearRect","resized","resizedCtx","fillStyle","fillRect","imgData","gray","length","avg","tensor2d","pixelSum","sum","dataSync","binary","greater","scalar","toFloat","activePixels","isVerySmall","detectProfile","centerImage","smoothLevel","gaussianSmooth","dilate","binarize","input","reshape","browser","toPixels","arraySync","arr","cx","cy","val","shiftX","shiftY","padded","pad","begin","size","safeBegin","map","v","min","slice","level","kernelArray","kernel","tensor4d","row","div","conv2d","maxPool","threshold","isFaint","isSmall","isThin"],"sources":["C:/Users/DELL/Desktop/HandwritingTherapyApp/frontend/src/agents/cnnAgent.js"],"sourcesContent":["// agents/cnnAgent.js\r\nimport * as tf from '@tensorflow/tfjs';\r\n\r\nlet model = null;\r\nlet currentLanguage = null;\r\n\r\nexport async function loadModel(lang = \"en\") {\r\n  if (model && currentLanguage === lang) return model;\r\n\r\n  const path = lang === \"ar\"\r\n    ? \"/models/model_tfjs_hala/model_tfjs/model.json\"\r\n    : \"/models/ENGLISH/model.json\";\r\n\r\n  try {\r\n    model = await tf.loadLayersModel(path);\r\n    currentLanguage = lang;\r\n    console.log(`‚úÖ ${lang.toUpperCase()} model loaded.`);\r\n  } catch (error) {\r\n    console.error(`‚ùå Failed to load ${lang} model:`, error);\r\n    throw error;\r\n  }\r\n\r\n  return model;\r\n}\r\n\r\nexport async function predictDigit(dataURL, lang = \"en\", profile = null, archiveArray = null, patientName = \"Anonymous\") {\r\n  await loadModel(lang);\r\n\r\n  const { tensor, debugCanvas } = await preprocessDrawing(dataURL, profile, true);\r\n  const prediction = model.predict(tensor);\r\n  const predictionArray = await prediction.array();\r\n  const predictedDigit = predictionArray[0].indexOf(Math.max(...predictionArray[0]));\r\n  const confidence = Math.max(...predictionArray[0]);\r\n\r\n  if (confidence < 0.6 && profile !== \"standard\") {\r\n    console.warn(\"‚ö†Ô∏è Low confidence. Consider fallback to less aggressive preprocessing.\");\r\n  }\r\n\r\n  if (archiveArray && debugCanvas) {\r\n    const blob = await new Promise(res => debugCanvas.toBlob(res, \"image/png\"));\r\n    const timestamp = Date.now();\r\n\r\n    console.log(\"üß™ Preprocessed image (debug view):\", debugCanvas.toDataURL(\"image/png\"));\r\n\r\n    archiveArray.push({\r\n      name: `digit_${predictedDigit}_${timestamp}.png`,\r\n      blob,\r\n    });\r\n\r\n    const text = `Prediction: ${predictedDigit}\\nTimestamp: ${timestamp}\\nPatient: ${patientName}`;\r\n    const metaBlob = new Blob([text], { type: \"text/plain\" });\r\n\r\n    archiveArray.push({\r\n      name: `digit_${predictedDigit}_${timestamp}.txt`,\r\n      blob: metaBlob,\r\n    });\r\n  }\r\n\r\n  return predictedDigit;\r\n}\r\n\r\nexport async function preprocessDrawing(dataURL, profile = null, includeCanvas = false) {\r\n  const image = new Image();\r\n  image.src = dataURL;\r\n  await new Promise((res) => (image.onload = res));\r\n\r\n  const canvas = document.createElement(\"canvas\");\r\n  canvas.width = image.width;\r\n  canvas.height = image.height;\r\n  const ctx = canvas.getContext(\"2d\");\r\n  ctx.drawImage(image, 0, 0);\r\n\r\n  return await preprocessCanvas(canvas, profile, includeCanvas);\r\n}\r\n\r\nfunction cropToBoundingBox(canvas) {\r\n  const ctx = canvas.getContext(\"2d\");\r\n  const { width, height } = canvas;\r\n  const imageData = ctx.getImageData(0, 0, width, height);\r\n  const data = imageData.data;\r\n\r\n  let top = height, bottom = 0, left = width, right = 0;\r\n\r\n  for (let y = 0; y < height; y++) {\r\n    for (let x = 0; x < width; x++) {\r\n      const idx = (y * width + x) * 4;\r\n      const r = data[idx], g = data[idx + 1], b = data[idx + 2];\r\n      const brightness = (r + g + b) / 3;\r\n\r\n      if (brightness < 240) {\r\n        if (x < left) left = x;\r\n        if (x > right) right = x;\r\n        if (y < top) top = y;\r\n        if (y > bottom) bottom = y;\r\n      }\r\n    }\r\n  }\r\n\r\n  const cropWidth = right - left + 1;\r\n  const cropHeight = bottom - top + 1;\r\n\r\n  const croppedCanvas = document.createElement(\"canvas\");\r\n  croppedCanvas.width = cropWidth;\r\n  croppedCanvas.height = cropHeight;\r\n  const croppedCtx = croppedCanvas.getContext(\"2d\");\r\n  croppedCtx.drawImage(canvas, left, top, cropWidth, cropHeight, 0, 0, cropWidth, cropHeight);\r\n\r\n  return deskewCanvas(croppedCanvas);\r\n}\r\n\r\nfunction deskewCanvas(canvas) {\r\n  const ctx = canvas.getContext(\"2d\");\r\n  const imageData = ctx.getImageData(0, 0, canvas.width, canvas.height);\r\n  const data = imageData.data;\r\n\r\n  let sumX = 0, sumY = 0, sumXY = 0, sumYY = 0, count = 0;\r\n  for (let y = 0; y < canvas.height; y++) {\r\n    for (let x = 0; x < canvas.width; x++) {\r\n      const i = (y * canvas.width + x) * 4;\r\n      const brightness = (data[i] + data[i+1] + data[i+2]) / 3;\r\n      const intensity = 1 - brightness / 255;\r\n      sumX += x * intensity;\r\n      sumY += y * intensity;\r\n      sumXY += x * y * intensity;\r\n      sumYY += y * y * intensity;\r\n      count += intensity;\r\n    }\r\n  }\r\n\r\n  if (count === 0) return canvas; // blank\r\n  const meanX = sumX / count;\r\n  const meanY = sumY / count;\r\n  const covXY = sumXY / count - meanX * meanY;\r\n  const varY = sumYY / count - meanY * meanY;\r\n  const skew = covXY / varY;\r\n\r\n  const deskewed = document.createElement(\"canvas\");\r\n  deskewed.width = canvas.width;\r\n  deskewed.height = canvas.height;\r\n  const dctx = deskewed.getContext(\"2d\");\r\n\r\n  dctx.setTransform(1, 0, -skew, 1, skew * canvas.height / 2, 0);\r\n  dctx.drawImage(canvas, 0, 0);\r\n  return deskewed;\r\n}\r\n\r\nexport async function preprocessCanvas(canvas, profile = null, includeCanvas = false) {\r\n  const cropped = cropToBoundingBox(canvas);\r\n\r\n  // Resize to 20x20 with aspect ratio preserved\r\n  const tempCanvas = document.createElement(\"canvas\");\r\n  tempCanvas.width = 20;\r\n  tempCanvas.height = 20;\r\n\r\n  const cropRatio = cropped.width / cropped.height;\r\n  let targetWidth = 20, targetHeight = 20;\r\n\r\n  if (cropRatio > 1) {\r\n    targetHeight = Math.round(20 / cropRatio);\r\n  } else {\r\n    targetWidth = Math.round(20 * cropRatio);\r\n  }\r\n\r\n  const tempCtx = tempCanvas.getContext(\"2d\");\r\n  tempCtx.clearRect(0, 0, 20, 20);\r\n  tempCtx.drawImage(\r\n    cropped,\r\n    (20 - targetWidth) / 2,\r\n    (20 - targetHeight) / 2,\r\n    targetWidth,\r\n    targetHeight\r\n  );\r\n\r\n  // Pad to 28x28\r\n  const resized = document.createElement(\"canvas\");\r\n  resized.width = 28;\r\n  resized.height = 28;\r\n  const resizedCtx = resized.getContext(\"2d\");\r\n  resizedCtx.fillStyle = \"white\";\r\n  resizedCtx.fillRect(0, 0, 28, 28);\r\n  resizedCtx.drawImage(tempCanvas, 4, 4);\r\n\r\n  // Convert to grayscale tensor\r\n  const imgData = resizedCtx.getImageData(0, 0, 28, 28);\r\n  const data = imgData.data;\r\n  const gray = [];\r\n  for (let i = 0; i < data.length; i += 4) {\r\n    const avg = (data[i] + data[i + 1] + data[i + 2]) / 3;\r\n    gray.push(1.0 - avg / 255);\r\n  }\r\n\r\n  let tensor = tf.tensor2d(gray, [28, 28]);\r\n\r\n  const pixelSum = tensor.sum().dataSync()[0];\r\n  const binary = tensor.greater(tf.scalar(0.15)).toFloat();\r\n  const activePixels = binary.sum().dataSync()[0];\r\n  const isVerySmall = activePixels < 60 || pixelSum < 25;\r\n\r\n  if (!profile) {\r\n    profile = detectProfile(pixelSum, activePixels);\r\n    console.log(\"üß† Auto-selected profile:\", profile);\r\n  }\r\n\r\n  tensor = centerImage(tensor); // center using center of mass\r\n\r\n  if (profile === \"standard\") {\r\n    console.log(\"üéØ Standard profile: Keeping raw grayscale\");\r\n  } else {\r\n    const smoothLevel = activePixels < 80 ? \"strong\" : \"light\";\r\n    tensor = gaussianSmooth(tensor, smoothLevel);\r\n\r\n    if (!isVerySmall && tensor.sum().dataSync()[0] < 50) {\r\n      tensor = dilate(tensor);\r\n    }\r\n\r\n    tensor = binarize(tensor, 0.25);\r\n  }\r\n\r\n  const input = tensor.reshape([1, 28, 28, 1]);\r\n\r\n  let debugCanvas = null;\r\n  if (includeCanvas) {\r\n    debugCanvas = document.createElement(\"canvas\");\r\n    debugCanvas.width = 28;\r\n    debugCanvas.height = 28;\r\n    await tf.browser.toPixels(tensor, debugCanvas);\r\n  }\r\n\r\n  return { tensor: input, debugCanvas };\r\n}\r\n\r\n\r\nfunction centerImage(tensor) {\r\n  const sum = tensor.sum().arraySync();\r\n  if (sum === 0) return tensor;\r\n\r\n  const arr = tensor.arraySync();\r\n  let cx = 0, cy = 0;\r\n\r\n  for (let y = 0; y < 28; y++) {\r\n    for (let x = 0; x < 28; x++) {\r\n      const val = arr[y][x];\r\n      cx += x * val;\r\n      cy += y * val;\r\n    }\r\n  }\r\n\r\n  cx /= sum;\r\n  cy /= sum;\r\n\r\n  const shiftX = Math.round(14 - cx);\r\n  const shiftY = Math.round(14 - cy);\r\n\r\n  const padded = tf.pad(tensor, [[1, 1], [1, 1]], 0);\r\n  const begin = [1 - shiftY, 1 - shiftX];\r\n  const size = [28, 28];\r\n  const safeBegin = begin.map(v => Math.max(0, Math.min(2, v)));\r\n\r\n  return tf.slice(padded, safeBegin, size);\r\n}\r\n\r\nfunction gaussianSmooth(tensor, level = \"strong\") {\r\n  let kernelArray;\r\n\r\n  if (level === \"light\") {\r\n    kernelArray = [\r\n      [0, 1, 0],\r\n      [1, 4, 1],\r\n      [0, 1, 0]\r\n    ];\r\n  } else {\r\n    kernelArray = [\r\n      [1, 2, 1],\r\n      [2, 4, 2],\r\n      [1, 2, 1]\r\n    ];\r\n  }\r\n\r\n  const kernel = tf.tensor4d(\r\n    kernelArray.map(row => row.map(val => [[val]])),\r\n    [3, 3, 1, 1]\r\n  ).div(level === \"light\" ? 8 : 16);\r\n\r\n  return tf.conv2d(tensor.reshape([1, 28, 28, 1]), kernel, 1, 'same').reshape([28, 28]);\r\n}\r\n\r\nfunction dilate(tensor) {\r\n  return tf.maxPool(tensor.reshape([1, 28, 28, 1]), [3, 3], [1, 1], 'same').reshape([28, 28]);\r\n}\r\n\r\nfunction binarize(tensor, threshold = 0.25) {\r\n  return tensor.greater(tf.scalar(threshold)).toFloat();\r\n}\r\n\r\nfunction detectProfile(pixelSum, activePixels) {\r\n  const isFaint = pixelSum < 40;\r\n  const isSmall = activePixels < 120;\r\n  const isThin = activePixels < 80 && pixelSum / activePixels < 0.5;\r\n\r\n  if (isFaint || isSmall || isThin) return \"parkinson-enhanced\";\r\n  return \"standard\";\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}