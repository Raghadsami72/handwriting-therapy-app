{"ast":null,"code":"// frontend/src/agents/tracking_agent/session_logger.js\n\nconst STORAGE_KEY = \"attempts\";\n\n// 🔐 1. Log individual drawing attempts\nexport function logAttempt(metricsObj) {\n  const existing = JSON.parse(localStorage.getItem(STORAGE_KEY) || \"[]\");\n  existing.push(metricsObj);\n  localStorage.setItem(STORAGE_KEY, JSON.stringify(existing));\n}\n\n// frontend/src/agents/tracking_agent/session_logger.js\n\n// ✅ Log a drawing session per patient (clean new logic)\nexport function saveSessionResult(patientName, sessionData) {\n  const cleanName = patientName.trim().toLowerCase();\n  const key = `sessions_${cleanName}`;\n  const existing = JSON.parse(localStorage.getItem(key) || \"[]\");\n  const alreadyExists = existing.some(e => e.sessionId === sessionData.sessionId);\n  if (alreadyExists) return;\n  existing.push(sessionData);\n  localStorage.setItem(key, JSON.stringify(existing));\n}\n\n// ✅ Get all saved sessions for a patient\nexport function getAllSessions(patientName) {\n  const cleanName = patientName.trim().toLowerCase();\n  const key = `sessions_${cleanName}`;\n  const sessions = JSON.parse(localStorage.getItem(key) || \"[]\");\n  console.log(`📦 Loaded ${sessions.length} sessions for ${cleanName}`);\n  return sessions;\n}\n\n// ✅ Generate a basic progress comparison against the previous session\nexport function getSessionProgressReport(currentMetrics, patientName) {\n  var _currentMetrics$tremo, _prev$tremorData;\n  const sessions = getAllSessions(patientName);\n  const prev = sessions.at(-2); // second last\n\n  if (!prev) return null;\n  return {\n    speedChange: currentMetrics.avgSpeed - prev.metrics.avgSpeed,\n    tremorChange: ((_currentMetrics$tremo = currentMetrics.tremorData) === null || _currentMetrics$tremo === void 0 ? void 0 : _currentMetrics$tremo.tremorScore) - ((_prev$tremorData = prev.tremorData) === null || _prev$tremorData === void 0 ? void 0 : _prev$tremorData.tremorScore),\n    accuracyChange: currentMetrics.digitAccuracy - prev.digitAccuracy,\n    improvement: currentMetrics.digitAccuracy > prev.digitAccuracy\n  };\n}","map":{"version":3,"names":["STORAGE_KEY","logAttempt","metricsObj","existing","JSON","parse","localStorage","getItem","push","setItem","stringify","saveSessionResult","patientName","sessionData","cleanName","trim","toLowerCase","key","alreadyExists","some","e","sessionId","getAllSessions","sessions","console","log","length","getSessionProgressReport","currentMetrics","_currentMetrics$tremo","_prev$tremorData","prev","at","speedChange","avgSpeed","metrics","tremorChange","tremorData","tremorScore","accuracyChange","digitAccuracy","improvement"],"sources":["C:/Users/DELL/Desktop/HandwritingTherapyApp/frontend/src/agents/tracking_agent/session_logger.js"],"sourcesContent":["\r\n// frontend/src/agents/tracking_agent/session_logger.js\r\n\r\nconst STORAGE_KEY = \"attempts\";\r\n\r\n// 🔐 1. Log individual drawing attempts\r\nexport function logAttempt(metricsObj) {\r\n  const existing = JSON.parse(localStorage.getItem(STORAGE_KEY) || \"[]\");\r\n  existing.push(metricsObj);\r\n  localStorage.setItem(STORAGE_KEY, JSON.stringify(existing));\r\n}\r\n\r\n// frontend/src/agents/tracking_agent/session_logger.js\r\n\r\n// ✅ Log a drawing session per patient (clean new logic)\r\nexport function saveSessionResult(patientName, sessionData) {\r\n  const cleanName = patientName.trim().toLowerCase();\r\n  const key = `sessions_${cleanName}`;\r\n\r\n  const existing = JSON.parse(localStorage.getItem(key) || \"[]\");\r\n\r\n  const alreadyExists = existing.some(e => e.sessionId === sessionData.sessionId);\r\n  if (alreadyExists) return;\r\n\r\n  existing.push(sessionData);\r\n  localStorage.setItem(key, JSON.stringify(existing));\r\n}\r\n\r\n// ✅ Get all saved sessions for a patient\r\nexport function getAllSessions(patientName) {\r\n  const cleanName = patientName.trim().toLowerCase();\r\n  const key = `sessions_${cleanName}`;\r\n\r\n  const sessions = JSON.parse(localStorage.getItem(key) || \"[]\");\r\n  console.log(`📦 Loaded ${sessions.length} sessions for ${cleanName}`);\r\n  return sessions;\r\n}\r\n\r\n// ✅ Generate a basic progress comparison against the previous session\r\nexport function getSessionProgressReport(currentMetrics, patientName) {\r\n  const sessions = getAllSessions(patientName);\r\n  const prev = sessions.at(-2); // second last\r\n\r\n  if (!prev) return null;\r\n\r\n  return {\r\n    speedChange: currentMetrics.avgSpeed - prev.metrics.avgSpeed,\r\n    tremorChange: currentMetrics.tremorData?.tremorScore - prev.tremorData?.tremorScore,\r\n    accuracyChange: currentMetrics.digitAccuracy - prev.digitAccuracy,\r\n    improvement: currentMetrics.digitAccuracy > prev.digitAccuracy,\r\n  };\r\n}\r\n"],"mappings":"AACA;;AAEA,MAAMA,WAAW,GAAG,UAAU;;AAE9B;AACA,OAAO,SAASC,UAAUA,CAACC,UAAU,EAAE;EACrC,MAAMC,QAAQ,GAAGC,IAAI,CAACC,KAAK,CAACC,YAAY,CAACC,OAAO,CAACP,WAAW,CAAC,IAAI,IAAI,CAAC;EACtEG,QAAQ,CAACK,IAAI,CAACN,UAAU,CAAC;EACzBI,YAAY,CAACG,OAAO,CAACT,WAAW,EAAEI,IAAI,CAACM,SAAS,CAACP,QAAQ,CAAC,CAAC;AAC7D;;AAEA;;AAEA;AACA,OAAO,SAASQ,iBAAiBA,CAACC,WAAW,EAAEC,WAAW,EAAE;EAC1D,MAAMC,SAAS,GAAGF,WAAW,CAACG,IAAI,CAAC,CAAC,CAACC,WAAW,CAAC,CAAC;EAClD,MAAMC,GAAG,GAAG,YAAYH,SAAS,EAAE;EAEnC,MAAMX,QAAQ,GAAGC,IAAI,CAACC,KAAK,CAACC,YAAY,CAACC,OAAO,CAACU,GAAG,CAAC,IAAI,IAAI,CAAC;EAE9D,MAAMC,aAAa,GAAGf,QAAQ,CAACgB,IAAI,CAACC,CAAC,IAAIA,CAAC,CAACC,SAAS,KAAKR,WAAW,CAACQ,SAAS,CAAC;EAC/E,IAAIH,aAAa,EAAE;EAEnBf,QAAQ,CAACK,IAAI,CAACK,WAAW,CAAC;EAC1BP,YAAY,CAACG,OAAO,CAACQ,GAAG,EAAEb,IAAI,CAACM,SAAS,CAACP,QAAQ,CAAC,CAAC;AACrD;;AAEA;AACA,OAAO,SAASmB,cAAcA,CAACV,WAAW,EAAE;EAC1C,MAAME,SAAS,GAAGF,WAAW,CAACG,IAAI,CAAC,CAAC,CAACC,WAAW,CAAC,CAAC;EAClD,MAAMC,GAAG,GAAG,YAAYH,SAAS,EAAE;EAEnC,MAAMS,QAAQ,GAAGnB,IAAI,CAACC,KAAK,CAACC,YAAY,CAACC,OAAO,CAACU,GAAG,CAAC,IAAI,IAAI,CAAC;EAC9DO,OAAO,CAACC,GAAG,CAAC,aAAaF,QAAQ,CAACG,MAAM,iBAAiBZ,SAAS,EAAE,CAAC;EACrE,OAAOS,QAAQ;AACjB;;AAEA;AACA,OAAO,SAASI,wBAAwBA,CAACC,cAAc,EAAEhB,WAAW,EAAE;EAAA,IAAAiB,qBAAA,EAAAC,gBAAA;EACpE,MAAMP,QAAQ,GAAGD,cAAc,CAACV,WAAW,CAAC;EAC5C,MAAMmB,IAAI,GAAGR,QAAQ,CAACS,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;;EAE9B,IAAI,CAACD,IAAI,EAAE,OAAO,IAAI;EAEtB,OAAO;IACLE,WAAW,EAAEL,cAAc,CAACM,QAAQ,GAAGH,IAAI,CAACI,OAAO,CAACD,QAAQ;IAC5DE,YAAY,EAAE,EAAAP,qBAAA,GAAAD,cAAc,CAACS,UAAU,cAAAR,qBAAA,uBAAzBA,qBAAA,CAA2BS,WAAW,MAAAR,gBAAA,GAAGC,IAAI,CAACM,UAAU,cAAAP,gBAAA,uBAAfA,gBAAA,CAAiBQ,WAAW;IACnFC,cAAc,EAAEX,cAAc,CAACY,aAAa,GAAGT,IAAI,CAACS,aAAa;IACjEC,WAAW,EAAEb,cAAc,CAACY,aAAa,GAAGT,IAAI,CAACS;EACnD,CAAC;AACH","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}